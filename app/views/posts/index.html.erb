<p id="notice"><%= notice %></p>

<% if @topic %>
  <h1>Posts for <%= @topic.name %> Topic</h1>
<% else %>
  <h1>All Posts</h1>
<% end %>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Name</th>
      <th>Content</th>
      <th>Date</th>
      <th>Tags</th>
<!--      <th>Topic</th>-->
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
  <%if @topic %>
    <% @topic.posts.each do |post| %>
      <tr>
        <td><%= post.name %></td>
        <td><%= post.content %></td>
        <td><%= post.date %></td>
        <td><%= render post.tags %></td>
<!--        <td><%#= post.topic_id %></td>-->
        <td><%= link_to 'Show', topic_post_path(@topic,post) %></td>
        <td><%= link_to 'Edit', edit_topic_post_path(@topic,post) %></td>
        <td><%= button_to 'Destroy', topic_post_path(@topic,post), method: :delete, data: { confirm: 'Are you sure?' } %></td>
<!--        <td>-->
<!--          <strong>Comments:</strong>-->
<!--          <ul>-->
            <%# post.comments.each do |comment| %>
<!--              <li><%#= comment.content %></li>-->
            <%# end %>
<!--          </ul>-->
<!--        </td>-->

        <td><%= link_to 'Comments', topic_post_comments_path(@topic,post) %></td>

      </tr>
    <% end %>
    <%else %>
    <% @posts.each do |post| %>
      <tr>
        <td><%= post.name %> (<%= post.topic.name %>)</td>
        <td><%= post.content %></td>
        <td><%= post.date %></td>
        <td><%= render post.tags %></td>

      </tr>

    <% end %>

    <%end %>
  </tbody>
</table>

<br>
<div class="d-flex justify-content-center">
<%= will_paginate @posts %>
</div>
<%if @topic %>
<%= link_to 'New Post', new_topic_post_path %> |
<%= link_to 'Back to Topic', topic_path(@topic) %>
<%else %>
  <%= link_to 'Back to home', root_path%>
<%end %>

